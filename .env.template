# Restore PG used by restore-indexer and restore-service runtime state.
REZ_RESTORE_PG_URL=postgres://rez_restore_service_rw:rez_restore_service_dev@127.0.0.1:5433/rez_restore
# Freshness threshold (seconds) for authoritative restore-index watermark gating.
RRS_RESTORE_INDEX_STALE_AFTER_SECONDS=120

# Restore service HTTP port.
PORT=3100
# Required admin API token for /v1/admin/* endpoints.
# Callers must send x-rezilient-admin-token with this value.
RRS_ADMIN_TOKEN=replace_with_strong_admin_token

# RS-02 shared auth token verification settings.
# Required shared signing key from auth control plane.
RRS_AUTH_SIGNING_KEY=replace_with_32_plus_char_random_secret
RRS_AUTH_TOKEN_CLOCK_SKEW_SECONDS=30
# Optional issuer pin. Leave empty to disable issuer pinning.
RRS_AUTH_EXPECTED_ISSUER=rez-auth-control-plane
# Required positive integer JSON request size cap.
RRS_MAX_JSON_BODY_BYTES=1048576

# ACP runtime source-mapping client settings (for staged migration).
RRS_ACP_BASE_URL=http://127.0.0.1:3010
RRS_ACP_INTERNAL_TOKEN=replace_with_acp_internal_token
RRS_ACP_REQUEST_TIMEOUT_MS=2000
RRS_ACP_POSITIVE_CACHE_TTL_SECONDS=30
RRS_ACP_NEGATIVE_CACHE_TTL_SECONDS=5

# RS-09 execute defaults and safety limits.
RRS_EXECUTE_DEFAULT_CHUNK_SIZE=100
RRS_EXECUTE_MAX_ROWS=10000
RRS_EXECUTE_ELEVATED_SKIP_RATIO_PERCENT=20
# 0 disables per-attempt chunk limits; >0 pauses jobs for resume after this
# many chunks are processed in one execute/resume attempt.
RRS_EXECUTE_MAX_CHUNKS_PER_ATTEMPT=0
# RS-11 media restore limits and retry behavior.
RRS_MEDIA_CHUNK_SIZE=25
RRS_MEDIA_MAX_ITEMS=1000
RRS_MEDIA_MAX_BYTES=104857600
RRS_MEDIA_MAX_RETRY_ATTEMPTS=3

# RS-12 evidence signing and immutable-storage metadata.
RRS_EVIDENCE_SIGNER_KEY_ID=rrs-ed25519-v1
# Required PEM values (supports literal \\n sequences).
RRS_EVIDENCE_SIGNING_PRIVATE_KEY_PEM=replace_with_ed25519_private_key_pem
RRS_EVIDENCE_SIGNING_PUBLIC_KEY_PEM=replace_with_matching_ed25519_public_key_pem
RRS_EVIDENCE_IMMUTABLE_WORM_ENABLED=false
RRS_EVIDENCE_IMMUTABLE_RETENTION_CLASS=standard-30d

# RS-15 staging/GA readiness defaults used by admin ops endpoints.
RRS_STAGING_MODE_ENABLED=false
RRS_GA_RUNBOOKS_SIGNED_OFF=false

# Canonical tenant/instance/source mappings used for scope enforcement.
# JSON array shape:
# [{"tenant_id":"tenant-acme","instance_id":"sn-dev-01","source":"sn://acme-dev.service-now.com"}]
RRS_SOURCE_MAPPINGS_JSON=[]
